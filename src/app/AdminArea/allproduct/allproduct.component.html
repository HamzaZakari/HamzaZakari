<div class="panel panel-default" >
  <div class="panel-heading main-color-bg d-flex">
    <h3 class="panel-title w-100 mt-10">Produits ({{products.length}})</h3>
    <button mat-button (click) = "gotoADDpro()"><span class="material-icons">add</span></button>
  </div>

  <div class="panel-body">
    <div class="row">
      <mat-form-field >
        <mat-label>Recherche par Catégorie</mat-label>
        <mat-select >
          <mat-option  (click)="showall()">Voir tous les Produits</mat-option>
          <mat-option  *ngFor="let st of Category" [value]="st.id" (click)="filterparCat(st.id)"><span *ngIf="st.titlefr !='null'">{{st.titlefr}}</span><span *ngIf="st.titlearab !='null' && st.titlefr == 'null'">{{st.titlearab}}</span></mat-option>
        </mat-select>
      </mat-form-field>
      <div class="col-md-12">
          <input class="form-control" type="text" id="search_text" name="search_text" placeholder="Recherche..." (keyup)="search($event)">
      </div>
    </div>
    <br>
    <div id="result">
      <div class="table-responsive">
        <mat-spinner *ngIf="this.products.length <= 0 && isloding" style="margin-left:300px;"></mat-spinner>
       <div class="alert alert-warning" *ngIf="this.products.length <= 0 && !isloding">
         <p> il n'y a pas de produits ici</p>
       </div>
        <ngb-alert *ngIf="!staticAlertClosed" (close)="staticAlertClosed = true">le produit a été supprimé avec succès </ngb-alert>
        <hr/>
        <table class="table table-striped table-hover classm" *ngIf="this.products.length > 0 && !isloding">
          <tr class="">
            <th></th>
            <th>N°</th>
            <th></th>
            <th>Status</th>
            <th>Image</th>
            <th>Titre</th>
            <th>Prix</th>
            <th></th>
            <th>Quantité</th>
            <th></th>
<!--            <th>date create</th>-->
            <th></th>
            <th></th>

          </tr>

          <tbody>

          <tr *ngFor="let prod of products let i = index" [ngClass]="prod.quantity == 0 ?'epuise':''">
            <th *ngIf="role !='service clients'"><a [routerLink]="['/dashboard/managepoids/',prod.id]"><i class="fa fa-balance-scale" style="cursor: pointer" ></i></a></th>
            <th>{{i+1}}</th>
            <td></td>
            <td *ngIf="prod.state ==='BIO'"><span class="new badge p-12" style="background: #04B4AE; margin: 15px 0px 13px -11px">{{prod.state}}</span></td>
            <td *ngIf="prod.state ==='NOTBIO'"><span class="new badge p-12" style="background: #FE9A2E; margin: 15px 0px 13px -11px">{{prod.state}}</span></td>
            <td>
              <div class="post-image">
                <img [src]="[url+prod.image]" class="img-responsive ">
              </div>
            </td>
            <td><span >{{prod.title !='null' ? prod.title : prod.titlearab}}</span></td>
            <td>{{prod.price | currency:'DH'}}</td>
            <td></td>
            <td>{{prod.quantity }}
            <td></td>
<!--            <td>{{prod.created_at | date:'dd/MM/yyyy hh:mm' }}</td>-->
            <td class="d-flex" *ngIf="role !='service clients'">
              <a [routerLink]="['/dashboard/edit_product',prod.id]" class="btn btn-primary btn-my" ><i class="fa fa-edit"></i></a> |
              <button type="button" class="btn btn-danger btn-my" (click)="delete(prod.id, prod.image)"><span class="material-icons">delete_forever</span></button> |
              <a [routerLink]="['/dashboard/upload_multiple_images',prod.id]" class="btn btn-success btn-my" ><i class="fa fa-image"></i></a> |
              <button class="btn btn-warning" (click) = "epuise(prod.id, prod.poids)" *ngIf="prod.quantity !=0">Epuisé <span class="spinner-border" *ngIf="epuisee && prod.id == id"></span></button>
              <span class="text-danger" *ngIf="prod.quantity == 0">Epuisé</span>
            </td>
            <td *ngIf="(prod.created_at |date) === (times | date)"><span class="new badge p-12" style="background: #5cb85c"> new </span></td>
          </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
